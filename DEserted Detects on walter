-- Load Rayfield Library
local Rayfield = loadstring(game:HttpGet("https://raw.githubusercontent.com/RayfieldDev/Rayfield/main/Source/Library.lua"))()

-- Create Rayfield Window
local window = Rayfield:CreateWindow({
    Name = "Deserted Script",
    LoadingTitle = "Loading...",
    LoadingSubtitle = "Please wait",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil, -- Leave it as nil if you don't want to use a folder
        FileName = "TGMANKASKEConfig"
    },
    Discord = {
        Enabled = false,
        Invite = "discord.gg/yourdiscordinvite",
        RememberJoins = true,
    },
    KeySystem = true,
    Key = "Tasmanian",
})

-- Create tabs
local mainTab = window:CreateTab("Main", 4483362458) -- Main tab with advanced flight and other features
local desertDetectorsTab = window:CreateTab("Desert Detectors", 4483362458) -- New tab for Infinite Money and Links
local creditsTab = window:CreateTab("Credits", 4483362458) -- Credits tab
local linksTab = window:CreateTab("Links", 4483362458) -- Links tab

-- Function to detect and draw ESP for collectable items
local function drawESP(item)
    if item and item:FindFirstChild("HumanoidRootPart") then
        local itemPosition = item.HumanoidRootPart.Position
        local screenPosition, onScreen = game:GetService("Workspace").CurrentCamera:WorldToScreenPoint(itemPosition)

        if onScreen then
            -- Drawing the ESP Box
            local espBox = Instance.new("Frame")
            espBox.Size = UDim2.new(0, 100, 0, 100)
            espBox.Position = UDim2.new(0, screenPosition.X - 50, 0, screenPosition.Y - 50)
            espBox.BackgroundColor3 = Color3.fromRGB(255, 0, 0)  -- Red box
            espBox.BorderSizePixel = 0
            espBox.Parent = game.CoreGui

            -- Get the actual name of the collectible item
            local itemName = item:FindFirstChild("Name") and item.Name or "Unknown"

            -- Displaying the name above the item
            local nameLabel = Instance.new("TextLabel")
            nameLabel.Text = itemName
            nameLabel.Position = UDim2.new(0, screenPosition.X - 50, 0, screenPosition.Y - 75)
            nameLabel.Size = UDim2.new(0, 100, 0, 30)
            nameLabel.BackgroundTransparency = 1
            nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            nameLabel.TextStrokeTransparency = 0.5
            nameLabel.TextScaled = true
            nameLabel.Parent = game.CoreGui
        end
    end
end

-- Function to detect and filter collectable items based on their properties
local function detectCollectables()
    for _, item in pairs(game:GetService("Workspace"):GetChildren()) do
        if item:IsA("Model") and item:FindFirstChild("HumanoidRootPart") then
            if item.Name:match("Jet") or item.Name:match("Tank") or item.Name:match("Weapon") then
                drawESP(item)
            end
        end
    end
end

-- Loop to continuously check for collectable items
local espLoop = game:GetService("RunService").Heartbeat:Connect(function()
    detectCollectables()
end)

-- Walk Fling Feature
local function walkFling()
    local character = game.Players.LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then return end
    local humanoid = character:FindFirstChild("Humanoid")
    if humanoid then
        while wait() do
            humanoid:Move(Vector3.new(math.random(-10, 10), 0, math.random(-10, 10)))
        end
    end
end

-- Fly Feature
local function fly()
    local character = game.Players.LocalPlayer.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then return end
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    local flying = true

    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
    bodyVelocity.Velocity = Vector3.new(0, 0, 0)
    bodyVelocity.Parent = humanoidRootPart

    local function updateFly()
        if flying then
            local mouse = game.Players.LocalPlayer:GetMouse()
            local targetPos = mouse.Hit.p
            bodyVelocity.Velocity = (targetPos - humanoidRootPart.Position).unit * 100
        else
            bodyVelocity:Destroy()
        end
    end

    game:GetService("RunService").Heartbeat:Connect(updateFly)
end

-- Gravity Control Feature
local function changeGravity(value)
    game:GetService("Workspace").Gravity = value
end

-- Walk Speed Feature
local function changeWalkSpeed(speed)
    local character = game.Players.LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
        end
    end
end

-- Desert Detectors Tab (Infinite Money Button & Links)
local desertSection = desertDetectorsTab:CreateSection("Desert Detectors")

desertSection:CreateButton("Enable Infinite Money", function()
    print("Infinite Money Activated!")
    
    _G.GetWins = true
    while _G.GetWins do
        wait()

        -- Fire 'Give_Quest' event
        local args = {
            [1] = {
                [1] = "Getting Settled",
                [2] = {
                    [1] = {
                        [1] = 0,
                        [2] = 0
                    },
                    [2] = "Any"
                },
                [3] = {
                    [1] = 9e9
                },
                [4] = "Return to Diddy"
            }
        }

        game:GetService("ReplicatedStorage"):WaitForChild("Give_Quest"):FireServer(unpack(args))

        -- Fire 'Win_Quest' event
        local args2 = {
            [1] = "Getting Settled"
        }

        game:GetService("ReplicatedStorage"):WaitForChild("Win_Quest"):FireServer(unpack(args2))
    end
end)

-- Desert Detectors: Walk Fling, Fly, Gravity, Walk Speed
local movementSection = desertDetectorsTab:CreateSection("Movement Features")

movementSection:CreateButton("Walk Fling", function()
    walkFling()
end)

movementSection:CreateButton("Fly", function()
    fly()
end)

movementSection:CreateSlider("Gravity", 0, 500, 196.2, function(value)
    changeGravity(value)
end)

movementSection:CreateSlider("Walk Speed", 0, 500, 16, function(value)
    changeWalkSpeed(value)
end)

-- Links Tab (With Buttons for copying URLs)
local linksSection = linksTab:CreateSection("Links")
linksSection:CreateButton("Discord Group", function()
    setclipboard("https://discord.gg/8A6k73JqCM")
end)

linksSection:CreateButton("YT Channel", function()
    setclipboard("https://www.youtube.com/@TGMANKASKE")
end)

linksSection:CreateButton("Tiktok PF", function()
    setclipboard("https://www.tiktok.com/@kman.rs")
end)

-- Credits Tab
local creditsSection = creditsTab:CreateSection("Credits")
creditsSection:CreateLabel("Credits: TGMANKASKE")

-- Initialize the window
window:Initialize()
